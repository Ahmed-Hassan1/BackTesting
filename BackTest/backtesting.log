WARNING:django.request:Not Found: /favicon.ico
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 126, in profitPal
    data = pd.read_csv("static/media/ES")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'static/media/ES'
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 126, in profitPal
    data = pd.read_csv("static/media/ES.csv")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 1026, in read_csv
    return _read(filepath_or_buffer, kwds)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 620, in _read
    parser = TextFileReader(filepath_or_buffer, **kwds)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 1620, in __init__
    self._engine = self._make_engine(f, self.engine)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\parsers\readers.py", line 1880, in _make_engine
    self.handles = get_handle(
                   ^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\io\common.py", line 873, in get_handle
    handle = open(
             ^^^^^
FileNotFoundError: [Errno 2] No such file or directory: 'static/media/ES'
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 127, in profitPal
    data['timestamp']=pd.to_datetime(data['timestamp'])-timedelta(hours=4,minutes=1)
                                     ~~~~^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'timestamp'
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\core\indexes\base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas\\_libs\\hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'timestamp'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 127, in profitPal
    data['timestamp']=pd.to_datetime(data['timestamp'])-timedelta(hours=4,minutes=1)
                                     ~~~~^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\core\frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\pandas\core\indexes\base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'timestamp'
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
WARNING:django.request:Not Found: /favicon.ico
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 135, in profitPal
    stats=bt.run(
          ^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\backtesting\backtesting.py", line 1219, in run
    strategy.next()
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 61, in next
    self.sell(tp=self.data.Close[-1]-self.TP*0.25,sl=self.data.Close[-1]+self.SL*0.25,size=-0.01)
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\backtesting\backtesting.py", line 231, in sell
    assert 0 < size < 1 or round(size) == size, \
AssertionError: size must be a positive fraction of equity, or a positive whole number of units
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 150, in profitPal
    highlighted_key.append(removed_stats.to_dict().keys()[24])
                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
TypeError: 'dict_keys' object is not subscriptable
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 135, in profitPal
    stats=bt.run(
          ^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\backtesting\backtesting.py", line 1219, in run
    strategy.next()
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 61, in next
    self.sell(tp=self.data.Close[-1]-self.TP*0.25,sl=self.data.Close[-1]+self.SL*0.25,size=-50)
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\backtesting\backtesting.py", line 233, in sell
    return self._broker.new_order(-size, limit, stop, sl, tp, tag)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\backtesting\backtesting.py", line 748, in new_order
    raise ValueError(
ValueError: Long orders require: SL (5286.5) < LIMIT (5280.75) < TP (5276.5)
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 149, in profitPal
    if float(trade['PnL'])>0:
             ~~~~~^^^^^^^
TypeError: string indices must be integers, not 'str'
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 148, in profitPal
    for key,val in tradesDict:
        ^^^^^^^
ValueError: too many values to unpack (expected 2)
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 148, in profitPal
    for key,val in tradesDict:
        ^^^^^^^
ValueError: too many values to unpack (expected 2)
ERROR:django.request:Internal Server Error: /profitpal
Traceback (most recent call last):
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\exception.py", line 47, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\env\Lib\site-packages\django\core\handlers\base.py", line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\STUFF\E\django\BacktestingEngine\BackTest\bt\views.py", line 148, in profitPal
    for key,val in tradesDict:
        ^^^^^^^
ValueError: too many values to unpack (expected 2)
